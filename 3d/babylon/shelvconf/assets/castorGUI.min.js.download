(function(window){var document=window.document,nativeColorGUI={started:false,color:'#000000',inputs:{},hasNativeColorSupport:false,init:function(inputId){this.start();
if(this.hasNativeColorSupport){return;
}if(typeof inputId!=='string'){throw'inputId have to be a string id selector';
}this.input=(this.inputs[inputId]=this.inputs[inputId])||document.getElementById(inputId);
if(!this.input){throw'There was no input found with id:"' + inputId + '"';
}this.input.value=this.color;
this.input.unselectable='on';
this.css(this.input,{backgroundColor:this.color,borderWidth:'0.4em 0.3em',width:'3em',cursor:'default'});
this.input.onfocus=function(){nativeColorPicker.onFocus(this.id);
};
},start:function(){if(this.started){return;
}try{this.hasNativeColorSupport=!!(document.createElement('input').type='color');
}catch(e){};
if(!this.hasNativeColorSupport){var object_element=document.createElement('object');
object_element.classid='clsid:3050f819-98b5-11cf-bb82-00aa00bdce0b';
object_element.id='colorHelperObj';
this.css(object_element,{width:'0',height:'0'});
document.body.appendChild(object_element);
}this.started=true;
},destroy:function(inputId){var i;
if(typeof inputId==='string'){this.off(this.inputs[inputId]);
}else{document.body.removeChild(document.getElementById('colorHelperObj'));
for(i in this.inputs){this.off(this.inputs[i]);
}this.started=false;
}},off:function(input){input.onfocus=null;
this.css(input,{backgroundColor:'',borderWidth:'',width:'',cursor:''});
},onFocus:function(inputId){this.input=this.inputs[inputId];
this.color=this.getColor();
this.input.value=this.color;
nativeColorGUI.css(this.input,{backgroundColor:this.color,color:this.color});
this.input.blur();
},getColor:function(){var hex=colorHelperObj.ChooseColorDlg(this.color.replace(/#/,'')).toString(16);
if(hex.length<6){var tmpstr='000000'.substring(0,6-hex.length);
hex=tmpstr.concat(hex);
}return'#'+hex;
},css:function(el,props){for(var prop in props){el.style[prop]=props[prop];
}}};
window.nativeColorGUI=nativeColorGUI;
}(window));


var CASTORGUI=CASTORGUI||{};
var guiElements=[];
var objectCreate=function(proto){function construct(){}construct.prototype=proto;
return new construct();
};
var Extends=function(ChildClass,ParentClass){ChildClass.prototype=Object.create(ParentClass.prototype)||objectCreate(ParentClass.prototype);
ChildClass.prototype.constructor=ChildClass;
};
(function(){CASTORGUI.GUIManager=function(canvas,css,options){this.canvasCss=css;
this.canvas=canvas;
this.groups=[];
this.guiVisible=true;
this.GUIstyle=null;
this.GUItheme=null;
if(options){this.pixel=options.pixel;
this.themeRoot=options.themeRoot||"";
this.theme=options.themeGUI||"default";
}else{this.pixel=true;
this.themeRoot="";
this.theme="default";
}this.head=document.head||document.getElementsByTagName('head')[0]||null;
this.html=document.body||document.getElementsByTagName('body')[0];
if(this.head==null){this.header=document.createElement('head');
this.head.appendChild(this.header);
}this.addStyle(this.canvasCss,this.theme);
document.addEventListener('webkitfullscreenchange',function(){location.reload();
},false);
document.addEventListener('mozfullscreenchange',function(){location.reload();
},false);
document.addEventListener('fullscreenchange',function(){location.reload();
},false);
document.addEventListener('MSFullscreenChange',function(){location.reload();
},false);
};
CASTORGUI.GUIManager.prototype.addGuiElements=function(elem){guiElements.push(elem);
};
CASTORGUI.GUIManager.convertPixelToPercent=false;
CASTORGUI.GUIManager.prototype.convertPixelToPercentWidth=function(pixel){var screenWidth=window.innerWidth;
var valueWidth=(pixel/screenWidth)*100;
return valueWidth;
};
CASTORGUI.GUIManager.prototype.convertPixelToPercentHeight=function(pixel){var screenHeight=window.innerHeight;
var valueHeight=(pixel/screenHeight)*100;
return valueHeight;
};
CASTORGUI.GUIManager.prototype.addStyle=function(css,theme){if(this.GUIstyle){this.head.removeChild(this.getElementById("styleGUI"));
this.canvasCss=this.canvasCss+css;
}else{this.canvasCss=this.canvasCss;
}this.GUIstyle=document.createElement('style');
this.GUIstyle.type='text/css';
this.GUIstyle.media='screen';
this.GUIstyle.id="styleGUI";
if(this.GUIstyle.styleSheet){this.GUIstyle.styleSheet.cssText=this.canvasCss;
}else{this.GUIstyle.appendChild(document.createTextNode(this.canvasCss));
}this.head.appendChild(this.GUIstyle);
if(this.GUItheme){this.head.removeChild(this.getElementById("themeGUI"));
}this.GUItheme=document.createElement('link');
this.GUItheme.type='text/css';
this.GUItheme.rel='stylesheet';
this.GUItheme.media='screen';
this.GUItheme.id="themeGUI";
this.GUItheme.href=this.themeRoot+"themesGUI/"+theme+".css";
this.head.appendChild(this.GUItheme);
};
CASTORGUI.GUIManager.prototype.fadeOut=function(el){if(el){el.style.opacity=1;
(function fade_moin(){if((el.style.opacity-=0.1)<0.1){el.style.display="none";
el.style.opacity=0;
}else if(el.style.opacity>0){requestAnimationFrame(fade_moin);
}})();
}};
CASTORGUI.GUIManager.prototype.fadeIn=function(el){if(el){el.style.opacity=0;
el.style.display="block";
(function fade_plus(){var val=parseFloat(el.style.opacity);
if(!((val+=0.1)>0.9)){el.style.opacity=1;
requestAnimationFrame(fade_plus);
}})();
}};
CASTORGUI.GUIManager.prototype.getElementById=function(id){return document.getElementById(id);
};
CASTORGUI.GUIManager.prototype.getCanvasOrigine=function(){var offsets=this.canvas.getBoundingClientRect(),offsetsTop=offsets.top||0,offsetsLeft=offsets.left||0;
return{top:offsetsTop,left:offsetsLeft};
};
CASTORGUI.GUIManager.prototype.getCanvasSize=function(){var offsets=this.canvas.getBoundingClientRect(),offsetsWidth=offsets.width||0,offsetsHeight=offsets.height||0;
return{width:offsetsWidth,height:offsetsHeight};
};
CASTORGUI.GUIManager.prototype.dispose=function(){var that=this;
guiElements.forEach(function(e){if(that.getElementById(e.id)){that.html.removeChild(that.getElementById(e.id));
}});
return;
};
CASTORGUI.GUIManager.prototype.setVisible=function(bool,fade){var display;
var that=this;
if(fade==undefined)fade=true;
var element=this.getElementById(this.id);
if(bool==true){display="block";
this.guiVisible=true;
if(fade==true){this.fadeIn(element);
}}else{display="none";
this.guiVisible=false;
if(fade==true){this.fadeOut(element);
}}if(fade==false){guiElements.forEach(function(e){that.getElementById(e.id).style.display=display;
});
}};
CASTORGUI.GUIManager.prototype.isVisible=function(){return this.guiVisible;
};
})();


var CASTORGUI=CASTORGUI||{};
!(function(moduleName,definition){if(typeof define==='function'&&typeof define.amd==='object'){define(definition);
}else{this[moduleName]=definition();
}})('draggable',function definition(){var currentElement,fairlyHighZIndex='10';
CASTORGUI.addEventListener=function(element,eventName,handler){if(element.addEventListener){element.addEventListener(eventName,handler,false);
}else if(element.attachEvent){element.attachEvent('on'+eventName,handler);
}else{element['on'+eventName]=handler;
}};
CASTORGUI.removeEventListener=function(element,eventName,handler){if(element.removeEventListener){element.removeEventListener(eventName,handler,false);
}else if(element.detachEvent){element.detachEvent('on'+eventName,handler);
}else{element['on'+eventName]=null;
}};
CASTORGUI.draggable=function(element,handle){handle=handle||element;
CASTORGUI.setPositionType(element);
CASTORGUI.setDraggableListeners(element);
CASTORGUI.addEventListener(handle,'mousedown',function(event){CASTORGUI.startDragging(event,element);
});
};
CASTORGUI.setPositionType=function(element){element.style.position='absolute';
};
CASTORGUI.setDraggableListeners=function(element){element.draggableListeners={start:[],drag:[],stop:[]};
element.whenDragStarts=CASTORGUI.addListener(element,'start');
element.whenDragging=CASTORGUI.addListener(element,'drag');
element.whenDragStops=CASTORGUI.addListener(element,'stop');
};
CASTORGUI.startDragging=function(event,element){currentElement&&CASTORGUI.sendToBack(currentElement);
currentElement=CASTORGUI.bringToFront(element);
var initialPosition=CASTORGUI.getInitialPosition(currentElement);
currentElement.style.left=CASTORGUI.inPixels(initialPosition.left);
currentElement.style.top=CASTORGUI.inPixels(initialPosition.top);
currentElement.lastXPosition=event.clientX;
currentElement.lastYPosition=event.clientY;
var okToGoOn=CASTORGUI.triggerEvent('start',{x:initialPosition.left,y:initialPosition.top,mouseEvent:event});
if(!okToGoOn){return;
}CASTORGUI.addDocumentListeners();
};
CASTORGUI.addListener=function(element,type){return function(listener){element.draggableListeners[type].push(listener);
};
};
CASTORGUI.triggerEvent=function(type,args){var result=true;
var listeners=currentElement.draggableListeners[type];
for(var i=listeners.length-1;
i>=0;
i--){if(listeners[i](args)===false){result=false;
}};
return result;
};
CASTORGUI.sendToBack=function(element){var decreasedZIndex=fairlyHighZIndex-1;
element.style['z-index']=decreasedZIndex;
element.style['zIndex']=decreasedZIndex;
};
CASTORGUI.bringToFront=function(element){element.style['z-index']=fairlyHighZIndex;
element.style['zIndex']=fairlyHighZIndex;
return element;
};
CASTORGUI.addDocumentListeners=function(){CASTORGUI.addEventListener(document,'selectstart',CASTORGUI.cancelDocumentSelection);
CASTORGUI.addEventListener(document,'mousemove',CASTORGUI.repositionElement);
CASTORGUI.addEventListener(document,'mouseup',CASTORGUI.removeDocumentListeners);
CASTORGUI.addEventListener(document,"touchstart",CASTORGUI.cancelDocumentSelection);
CASTORGUI.addEventListener(document,"touchmove",CASTORGUI.repositionElement);
CASTORGUI.addEventListener(document,"touchend",CASTORGUI.removeDocumentListeners);
CASTORGUI.addEventListener(document,"touchcancel",CASTORGUI.removeDocumentListeners);
};
CASTORGUI.getInitialPosition=function(element){var boundingClientRect=element.getBoundingClientRect();
return{top:boundingClientRect.top,left:boundingClientRect.left};
};
CASTORGUI.inPixels=function(value){return value+'px';
};
CASTORGUI.cancelDocumentSelection=function(event){event.preventDefault&&event.preventDefault();
event.stopPropagation&&event.stopPropagation();
event.returnValue=false;
return false;
};
CASTORGUI.repositionElement=function(event){event.preventDefault&&event.preventDefault();
event.returnValue=false;
var style=currentElement.style;
var elementXPosition=parseInt(style.left,10);
var elementYPosition=parseInt(style.top,10);
var elementNewXPosition=elementXPosition+(event.clientX-currentElement.lastXPosition);
var elementNewYPosition=elementYPosition+(event.clientY-currentElement.lastYPosition);
style.left=CASTORGUI.inPixels(elementNewXPosition);
style.top=CASTORGUI.inPixels(elementNewYPosition);
currentElement.lastXPosition=event.clientX;
currentElement.lastYPosition=event.clientY;
CASTORGUI.triggerEvent('drag',{x:elementNewXPosition,y:elementNewYPosition,mouseEvent:event});
};
CASTORGUI.removeDocumentListeners=function(event){CASTORGUI.removeEventListener(document,'selectstart',CASTORGUI.cancelDocumentSelection);
CASTORGUI.removeEventListener(document,'mousemove',CASTORGUI.repositionElement);
CASTORGUI.removeEventListener(document,'mouseup',CASTORGUI.removeDocumentListeners);
CASTORGUI.removeEventListener(document,"touchstart",CASTORGUI.cancelDocumentSelection);
CASTORGUI.removeEventListener(document,"touchmove",CASTORGUI.repositionElement);
CASTORGUI.removeEventListener(document,"touchend",CASTORGUI.removeDocumentListeners);
CASTORGUI.removeEventListener(document,"touchcancel",CASTORGUI.removeDocumentListeners);
var left=parseInt(currentElement.style.left,10);
var top=parseInt(currentElement.style.top,10);
CASTORGUI.triggerEvent('stop',{x:left,y:top,mouseEvent:event});
};
return CASTORGUI.draggable;
});




var CASTORGUI=CASTORGUI||{};
(function(){CASTORGUI.GUITextfield=function(id,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);
if(append==null||append==undefined){append=true;
}this.id=id;
this.html=document.body||document.getElementsByTagName('body')[0];
this.textfieldPosition={x:options.x,y:options.y};
this.textfieldSize={width:options.w,height:options.h};
this.value=options.value||"";
this.background=options.background||null;
this.border=options.border||null;
this.color=options.color||null;
this.placeholder=options.placeholder||"";
this.zIndex=options.zIndex||2;
this.textfieldVisible=true;
this.onchangeTextfield=callback||"";
this.tabindex=options.tabindex||0;
if(append==true){this.addElement(append);
}};
Extends(CASTORGUI.GUITextfield,CASTORGUI.GUIManager);
CASTORGUI.GUITextfield.prototype.addElement=function(append,element){var signe="";
if(this.pixel){signe="px";
}else{signe="%";
}var textfield=document.createElement("input");
textfield.type="text";
textfield.style.width=this.textfieldSize.width+"px";
textfield.style.height=this.textfieldSize.height+"px";
if(CASTORGUI.GUIManager.convertPixelToPercent==true){if(append==true){textfield.style.top=this.convertPixelToPercentHeight(this.textfieldPosition.y+this.getCanvasOrigine().top)+"%";
textfield.style.left=this.convertPixelToPercentWidth(this.textfieldPosition.x+this.getCanvasOrigine().left)+"%";
}else{textfield.style.top=(this.textfieldPosition.y)+"px";
textfield.style.left=(this.textfieldPosition.x)+"px";
}}else{if(append==true){textfield.style.top=(this.textfieldPosition.y+this.getCanvasOrigine().top)+signe;
textfield.style.left=(this.textfieldPosition.x+this.getCanvasOrigine().left)+signe;
}else{textfield.style.top=this.textfieldPosition.y+signe;
textfield.style.left=this.textfieldPosition.x+signe;
}}textfield.style.position="absolute";
textfield.style.display="block";
textfield.id=this.id;
textfield.name=this.id;
textfield.className="GUITextfield";
textfield.tabindex=this.tabindex;
textfield.value=this.value;
textfield.placeholder=this.placeholder;
textfield.style.zIndex=this.zIndex;
if(this.background!=null){textfield.style.background=this.background;
}textfield.style.border=this.border;
if(this.color!=null){textfield.style.color=this.color;
}textfield.onchange=this.onchangeTextfield;
if(append==true){this.html.appendChild(textfield);
}else{element.appendChild(textfield);
}this.addGuiElements(textfield);
};
CASTORGUI.GUITextfield.prototype.getValue=function(){return this.getElementById(this.id).value;
};
CASTORGUI.GUITextfield.prototype.setValue=function(val){this.value=val;
this.getElementById(this.id).value=val;
};
CASTORGUI.GUITextfield.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));
};
CASTORGUI.GUITextfield.prototype.setVisible=function(bool,fade){var display;
if(fade==undefined)fade=true;
var element=this.getElementById(this.id);
if(bool==true){display="block";
this.textfieldVisible=true;
if(fade==true){this.fadeIn(element);
}}else{display="none";
this.textfieldVisible=false;
if(fade==true){this.fadeOut(element);
}}if(fade==false){element.style.display=display;
}};
CASTORGUI.GUITextfield.prototype.isVisible=function(){return this.textfieldVisible;
};
})();


var CASTORGUI=CASTORGUI||{};
(function(){CASTORGUI.GUITextarea=function(id,options,guimanager,callback,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);
if(append==null||append==undefined){append=true;
}this.id=id;
this.html=document.body||document.getElementsByTagName('body')[0];
this.textareaPosition={x:options.x,y:options.y};
this.textareaSize={width:options.w,height:options.h};
this.value=options.value||"";
this.placeholder=options.placeholder||"";
this.background=options.background||null;
this.color=options.color||null;
this.zIndex=options.zIndex||2;
this.textareaVisible=true;
this.onchangeTextarea=callback||"";
this.tabindex=options.tabindex||0;
this.append=append;
if(this.append==true){this.addElement(this.append);
}};
Extends(CASTORGUI.GUITextarea,CASTORGUI.GUIManager);
CASTORGUI.GUITextarea.prototype.addElement=function(append,element){var signe="";
if(this.pixel){signe="px";
}else{signe="%";
}var textarea=document.createElement("textarea");
textarea.cols=this.textareaSize.width;
textarea.rows=this.textareaSize.height;
if(CASTORGUI.GUIManager.convertPixelToPercent==true){if(append==true){textarea.style.top=this.convertPixelToPercentHeight(this.textareaPosition.y+this.getCanvasOrigine().top)+"%";
textarea.style.left=this.convertPixelToPercentWidth(this.textareaPosition.x+this.getCanvasOrigine().left)+"%";
}else{textarea.style.top=(this.textareaPosition.y)+"px";
textarea.style.left=(this.textareaPosition.x)+"ox";
}}else{if(append==true){textarea.style.top=(this.textareaPosition.y+this.getCanvasOrigine().top)+signe;
textarea.style.left=(this.textareaPosition.x+this.getCanvasOrigine().left)+signe;
}else{textarea.style.top=this.textareaPosition.y+signe;
textarea.style.left=this.textareaPosition.x+signe;
}}textarea.style.position="absolute";
textarea.style.display="block";
textarea.placeholder=this.placeholder;
textarea.id=this.id;
textarea.name=this.id;
textarea.className="GUITextarea";
textarea.tabindex=this.tabindex;
textarea.innerHTML=this.value;
textarea.style.zIndex=this.zIndex;
if(this.background!=null){textarea.style.background=this.background;
}if(this.color!=null){textarea.style.color=this.color;
}textarea.onchange=this.onchangeTextarea;
if(append==true){this.html.appendChild(textarea);
}else{element.appendChild(textarea);
}this.addGuiElements(textarea);
};
CASTORGUI.GUITextarea.prototype.getValue=function(){return this.getElementById(this.id).value;
};
CASTORGUI.GUITextarea.prototype.setValue=function(val){this.value=val;
this.getElementById(this.id).value=val;
};
CASTORGUI.GUITextarea.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));
};
CASTORGUI.GUITextarea.prototype.setVisible=function(bool,fade){var display;
if(fade==undefined)fade=true;
var element=this.getElementById(this.id);
if(bool==true){display="block";
this.textareaVisible=true;
if(fade==true){this.fadeIn(element);
}}else{display="none";
this.textareaVisible=false;
if(fade==true){this.fadeOut(element);
}}if(fade==false){element.style.display=display;
}};
CASTORGUI.GUITextarea.prototype.isVisible=function(){return this.textareaVisible;
};
})();


var CASTORGUI=CASTORGUI||{};
(function(){CASTORGUI.GUIText=function(id,options,guimanager,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);
this.append=append;
if(append==null||append==undefined){this.append=true;
}this.id=id;
this.html=document.body||document.getElementsByTagName('body')[0];
this.textPosition={x:options.x,y:options.y};
this.textSize=options.size||30;
this.color=options.color||null;
this.background=options.background||null;
this.police=options.police||null;
this.texte=options.text||"CastorGUI";
this.zIndex=options.zIndex||1;
this.bold=options.bold||null;
this.italic=options.italic||null;
this.position=options.position||"absolute";
this.centerVertical=options.centerVertical||false;
this.centerHorizontal=options.centerHorizontal||false;
this.inline=options.inline||false;
this.textVisible=true;
this.textElement=null;
this.font=null;
if(this.append==true){this.addElement(this.append);
}};
Extends(CASTORGUI.GUIText,CASTORGUI.GUIManager);
CASTORGUI.GUIText.prototype.addElement=function(append,element){var signe="";
if(this.pixel){signe="px";
}else{signe="%";
}this.font=this.textSize+"px "+this.police;
this.textElement=document.createElement("span");
if(this.inline==false){this.textElement.style.width="auto";
}else{this.textElement.style.width=CASTORGUI.GUIText.getTextWidth(this.texte,this.font).w+"px";
}this.textElement.style.height=CASTORGUI.GUIText.getTextWidth(this.texte,this.font).h+"px";
if(CASTORGUI.GUIManager.convertPixelToPercent==true){if(append==true){this.textElement.style.top=this.convertPixelToPercentHeight(this.textPosition.y+this.getCanvasOrigine().top)+"%";
this.textElement.style.left=this.convertPixelToPercentWidth(this.textPosition.x+this.getCanvasOrigine().left)+"%";
}else{this.textElement.style.top=(this.textPosition.y)+"px";
this.textElement.style.left=(this.textPosition.x)+"px";
}}else{if(append==true){this.textElement.style.top=(this.textPosition.y+this.getCanvasOrigine().top)+signe;
this.textElement.style.left=(this.textPosition.x+this.getCanvasOrigine().left)+signe;
}else{this.textElement.style.top=this.textPosition.y+signe;
this.textElement.style.left=this.textPosition.x+signe;
}}this.textElement.style.display="block";
this.textElement.style.position=this.position;
this.textElement.style.font=this.font;
this.textElement.style.color=this.color;
this.textElement.style.background=this.background;
this.textElement.style.fontStyle=this.italic;
this.textElement.style.fontWeight=this.bold;
this.textElement.innerHTML=this.texte;
this.textElement.id=this.id;
this.textElement.name=this.id;
this.textElement.className="GUIText";
this.textElement.style.zIndex=this.zIndex;
if(append==true){if(this.centerVertical){var marginTop=((this.getCanvasSize().height/2)-(CASTORGUI.GUIText.getTextWidth(this.texte,this.font).h/2));
this.textElement.style.top=(marginTop+this.getCanvasOrigine().top)+signe;
}if(this.centerHorizontal){var marginTotal=(this.getCanvasSize().width-CASTORGUI.GUIText.getTextWidth(this.texte,this.font).w);
var marginLeft=(marginTotal/2);
this.textElement.style.left=(marginLeft+this.getCanvasOrigine().left)+signe;
}this.html.appendChild(this.textElement);
}else{if(this.centerVertical){this.textElement.style.top="calc(50% - "+(CASTORGUI.GUIText.getTextWidth(this.texte,this.font).h/2)+"px)";
}if(this.centerHorizontal=="true"){this.textElement.style.width="100%";
this.textElement.style.textAlign="center";
}element.appendChild(this.textElement);
}this.addGuiElements(this.textElement);
};
CASTORGUI.GUIText.prototype.updateText=function(texte){var signe="";
if(this.pixel){signe="px";
}else{signe="%";
}if(this.append==true){this.textElement.style.width=CASTORGUI.GUIText.getTextWidth(texte,this.font).w+signe;
this.textElement.style.height=CASTORGUI.GUIText.getTextWidth(texte,this.font).h+signe;
this.textElement.style.top=(this.textPosition.y+this.getCanvasOrigine().top)+signe;
this.textElement.style.left=(this.textPosition.x+this.getCanvasOrigine().left)+signe;
}else{this.textElement.style.top=this.textPosition.y+signe;
this.textElement.style.left=this.textPosition.x+signe;
}if(this.centerVertical=="true"){var marginTop=((this.getCanvasSize().height/2)-(CASTORGUI.GUIText.getTextWidth(texte,this.font).h/2));
this.textElement.style.top=(marginTop+this.getCanvasOrigine().top)+signe;
}if(this.centerHorizontal=="true"){var marginTotal=(this.getCanvasSize().width-CASTORGUI.GUIText.getTextWidth(texte,this.font).w);
var marginLeft=(marginTotal/2);
this.textElement.style.left=(marginLeft+this.getCanvasOrigine().left)+signe;
}this.textElement.innerHTML=texte;
};
CASTORGUI.GUIText.getTextWidth=function(texte,font){var tag=document.createElement("div");
tag.style.position="absolute";
tag.style.left="-999em";
tag.style.display="block";
tag.style.whiteSpace="nowrap";
tag.style.font=font||this.textSize+"px "+this.police;
tag.innerHTML=texte;
document.body.appendChild(tag);
var result={w:tag.clientWidth+10,h:tag.clientHeight};
document.body.removeChild(tag);
return result;
};
CASTORGUI.GUIText.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));
};
CASTORGUI.GUIText.prototype.setVisible=function(bool,fade){var display;
if(fade==undefined)fade=true;
var element=this.getElementById(this.id);
if(bool==true){display="block";
this.textVisible=true;
if(fade==true){this.fadeIn(element);
}}else{display="none";
this.textVisible=false;
if(fade==true){this.fadeOut(element);
}}if(fade==false){element.style.display=display;
}};
CASTORGUI.GUIText.prototype.isVisible=function(){return this.textVisible;
};
})();


var CASTORGUI=CASTORGUI||{};
(function(){CASTORGUI.GUITextLink=function(id,options,guimanager,append){CASTORGUI.GUIManager.call(this,guimanager.canvas,guimanager.canvasCss);
this.append=append;
if(append==null||append==undefined){this.append=true;
}this.id=id;
this.html=document.body||document.getElementsByTagName('body')[0];
this.textPosition={x:options.x,y:options.y};
this.textSize=options.size||30;
this.color=options.color||null;
this.background=options.background||null;
this.police=options.police||null;
this.texte=options.text||"google.com";
this.zIndex=options.zIndex||1;
this.bold=options.bold||null;
this.italic=options.italic||null;
this.position=options.position||"absolute";
this.centerVertical=options.centerVertical||false;
this.centerHorizontal=options.centerHorizontal||false;
this.inline=options.inline||false;
this.textVisible=true;
this.textElement=null;
this.font=null;
this.href=options.href||"https:\/\/www.google.com";
if(this.append==true){this.addElement(this.append);
}};
Extends(CASTORGUI.GUITextLink,CASTORGUI.GUIManager);
CASTORGUI.GUITextLink.prototype.addElement=function(append,element){var signe="";
if(this.pixel){signe="px";
}else{signe="%";
}this.font=this.textSize+"px "+this.police;
this.textElement=document.createElement("a");
if(this.inline==false){this.textElement.style.width="auto";
}else{this.textElement.style.width=CASTORGUI.GUITextLink.getTextWidth(this.texte,this.font).w+"px";
}this.textElement.style.height=CASTORGUI.GUITextLink.getTextWidth(this.texte,this.font).h+"px";
if(CASTORGUI.GUIManager.convertPixelToPercent==true){if(append==true){this.textElement.style.top=this.convertPixelToPercentHeight(this.textPosition.y+this.getCanvasOrigine().top)+"%";
this.textElement.style.left=this.convertPixelToPercentWidth(this.textPosition.x+this.getCanvasOrigine().left)+"%";
}else{this.textElement.style.top=(this.textPosition.y)+"px";
this.textElement.style.left=(this.textPosition.x)+"px";
}}else{if(append==true){this.textElement.style.top=(this.textPosition.y+this.getCanvasOrigine().top)+signe;
this.textElement.style.left=(this.textPosition.x+this.getCanvasOrigine().left)+signe;
}else{this.textElement.style.top=this.textPosition.y+signe;
this.textElement.style.left=this.textPosition.x+signe;
}}this.textElement.style.display="block";
this.textElement.style.position=this.position;
this.textElement.style.font=this.font;
this.textElement.style.color=this.color;
this.textElement.style.background=this.background;
this.textElement.style.fontStyle=this.italic;
this.textElement.style.fontWeight=this.bold;
this.textElement.innerHTML=this.texte;
this.textElement.id=this.id;
this.textElement.name=this.id;
this.textElement.className="GUITextLink";
this.textElement.style.zIndex=this.zIndex;
this.textElement.setAttribute('href',this.href);
if(append==true){if(this.centerVertical){var marginTop=((this.getCanvasSize().height/2)-(CASTORGUI.GUITextLink.getTextWidth(this.texte,this.font).h/2));
this.textElement.style.top=(marginTop+this.getCanvasOrigine().top)+signe;
}if(this.centerHorizontal){var marginTotal=(this.getCanvasSize().width-CASTORGUI.GUITextLink.getTextWidth(this.texte,this.font).w);
var marginLeft=(marginTotal/2);
this.textElement.style.left=(marginLeft+this.getCanvasOrigine().left)+signe;
}this.html.appendChild(this.textElement);
}else{if(this.centerVertical){this.textElement.style.top="calc(50% - "+(CASTORGUI.GUITextLink.getTextWidth(this.texte,this.font).h/2)+"px)";
}if(this.centerHorizontal=="true"){this.textElement.style.width="100%";
this.textElement.style.textAlign="center";
}element.appendChild(this.textElement);
}this.addGuiElements(this.textElement);
};
CASTORGUI.GUITextLink.prototype.updateText=function(texte){var signe="";
if(this.pixel){signe="px";
}else{signe="%";
}if(this.append==true){this.textElement.style.width=CASTORGUI.GUITextLink.getTextWidth(texte,this.font).w+signe;
this.textElement.style.height=CASTORGUI.GUITextLink.getTextWidth(texte,this.font).h+signe;
this.textElement.style.top=(this.textPosition.y+this.getCanvasOrigine().top)+signe;
this.textElement.style.left=(this.textPosition.x+this.getCanvasOrigine().left)+signe;
}else{this.textElement.style.top=this.textPosition.y+signe;
this.textElement.style.left=this.textPosition.x+signe;
}if(this.centerVertical=="true"){var marginTop=((this.getCanvasSize().height/2)-(CASTORGUI.GUITextLink.getTextWidth(texte,this.font).h/2));
this.textElement.style.top=(marginTop+this.getCanvasOrigine().top)+signe;
}if(this.centerHorizontal=="true"){var marginTotal=(this.getCanvasSize().width-CASTORGUI.GUITextLink.getTextWidth(texte,this.font).w);
var marginLeft=(marginTotal/2);
this.textElement.style.left=(marginLeft+this.getCanvasOrigine().left)+signe;
}this.textElement.innerHTML=texte;
};
CASTORGUI.GUITextLink.getTextWidth=function(texte,font){var tag=document.createElement("div");
tag.style.position="absolute";
tag.style.left="-999em";
tag.style.display="block";
tag.style.whiteSpace="nowrap";
tag.style.font=font||this.textSize+"px "+this.police;
tag.innerHTML=texte;
document.body.appendChild(tag);
var result={w:tag.clientWidth+10,h:tag.clientHeight};
document.body.removeChild(tag);
return result;
};
CASTORGUI.GUITextLink.prototype.dispose=function(){return this.html.removeChild(this.getElementById(this.id));
};
CASTORGUI.GUITextLink.prototype.setVisible=function(bool,fade){var display;
if(fade==undefined)fade=true;
var element=this.getElementById(this.id);
if(bool==true){display="block";
this.textVisible=true;
if(fade==true){this.fadeIn(element);
}}else{display="none";
this.textVisible=false;
if(fade==true){this.fadeOut(element);
}}if(fade==false){element.style.display=display;
}};
CASTORGUI.GUITextLink.prototype.isVisible=function(){return this.textVisible;
};
})();
